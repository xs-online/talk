(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user_list"],{"0052":function(t,e,a){var n=a("81b7");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var s=a("4f06").default;s("d9279f00",n,!0,{sourceMap:!1,shadowMode:!1})},"0880":function(t,e,a){"use strict";var n=a("0052"),s=a.n(n);s.a},"2e61":function(t,e,a){"use strict";a.r(e);var n=a("de04"),s=a("3104");for(var i in s)["default"].indexOf(i)<0&&function(t){a.d(e,t,(function(){return s[t]}))}(i);a("0880");var u=a("f0c5"),r=Object(u["a"])(s["default"],n["b"],n["c"],!1,null,"54d3e024",null,!1,n["a"],void 0);e["default"]=r.exports},3104:function(t,e,a){"use strict";a.r(e);var n=a("839b"),s=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(i);e["default"]=s.a},"740b":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){}));var n=function(){var t=this.$createElement,e=this._self._c||t;return e("v-uni-view",{staticClass:"empty-content"},[e("v-uni-view",{staticClass:"wanl-gray text-center"},[e("v-uni-image",{staticClass:"animation-scale-down",attrs:{src:this.src?this.$wanlshop.appstc("/default/"+this.src+".png"):this.$wanlshop.appstc("/default/default3x.png")}}),e("v-uni-view",{staticClass:"text-30"},[this._v(this._s(this.text))])],1)],1)},s=[]},"81b7":function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,".cu-avatar.lg[data-v-54d3e024]{width:%?90?%;height:%?90?%;font-size:1.5em}.cu-list.menu-avatar>.cu-item[data-v-54d3e024]{height:%?160?%}.wanlian.cu-bar.tabbar[data-v-54d3e024]{background-color:initial}.wanlian.cu-bar.tabbar .cu-btn[data-v-54d3e024]{width:calc(100% - %?50?%)}.wanlian.cu-bar.tabbar .cu-btn.lg[data-v-54d3e024]{font-size:%?32?%;height:%?86?%}",""]),t.exports=e},"839b":function(t,e,a){"use strict";(function(t){a("7a82");var n=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("99af"),a("e9c4");var s=n(a("c7eb")),i=n(a("1da1")),u={data:function(){return{addressList:[],modalName:null,listTouchStart:0,listTouchDirection:null,total:0,current_page:1,last_page:1,status:"loading",contentText:{contentdown:" ",contentrefresh:"正在加载..",contentnomore:""},shop_id:0,myname:""}},onPullDownRefresh:function(){this.current_page=1,this.reload=!0,this.loadData()},onReachBottom:function(){this.current_page>=this.last_page?this.status="noMore":(this.current_page=this.current_page+1,this.status="loading",this.loadData(!0))},onLoad:function(e){var a=this;uni.$on("onMessage",this.getlist),this.loadData(),setInterval((function(){t("log","循环请求"," at pages/user_list.vue:86"),a.getlist()}),4e3),setTimeout((function(){a.$store.state.user&&(a.myname=a.$store.state.user.username,t("log","myname",a.myname," at pages/user_list.vue:93"))}),2e3)},onShow:function(){var t=uni.getStorageSync("wanlshop:user");t.id&&this.getlist()},methods:{fuzhi:function(){var e=this.$store.state.user.kefu_url;uni.setClipboardData({data:"https://x94.life/#/pages/user_chat?id="+e,success:function(e){t("log","成功复制到剪贴板"," at pages/user_list.vue:113")},fail:function(e){t("error","复制失败",e," at pages/user_list.vue:116")}})},getlist:function(){var t=this;return(0,i.default)((0,s.default)().mark((function e(){return(0,s.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t,e.next=3,uni.request({url:"/chat/lists",success:function(e){t.addressList=e.data}});case 3:case"end":return e.stop()}}),e)})))()},loadData:function(e,a){var n=this;return(0,i.default)((0,s.default)().mark((function a(){var i;return(0,s.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=n,a.next=3,uni.request({url:"/chat/lists",data:{page:e?i.current_page:1},success:function(a){if(e)try{i.addressList=i.addressList.concat(a.data.data)}catch(n){t("log",n.message," at pages/user_list.vue:143")}else i.addressList=a.data.data,uni.stopPullDownRefresh();i.total=a.data.total,i.current_page=a.data.current_page,i.last_page=a.data.last_page,i.status=0==a.data.total?"noMore":"more"}});case 3:case"end":return a.stop()}}),a)})))()},delAddress:function(t,e){var a=this;return(0,i.default)((0,s.default)().mark((function n(){return(0,s.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a.$delete(a.addressList,e),n.next=3,uni.request({url:"/wanlshop/address/deladdress",method:"POST",data:{id:t}});case 3:case"end":return n.stop()}}),n)})))()},refreshList:function(t,e){var a=this;return(0,i.default)((0,s.default)().mark((function n(){return(0,s.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,uni.request({url:"/wanlshop/address/address",method:"POST",data:{data:t,type:e},success:function(t){a.loadData(!1,!0)}});case 2:case"end":return n.stop()}}),n)})))()},checkAddress:function(e){t("log",e.id," at pages/user_list.vue:177"),this.$wanlshop.to("/pages/kefu_chat?id="+e.id)},addAddress:function(t,e){this.$wanlshop.to("/pages/kefu_chat?type=".concat(t,"&data=").concat(JSON.stringify(e)))},ListTouchStart:function(t){this.listTouchStart=t.touches[0].pageX},ListTouchMove:function(t){this.listTouchDirection=t.touches[0].pageX-this.listTouchStart>0?"right":"left"},ListTouchEnd:function(t){"left"==this.listTouchDirection?this.modalName=t.currentTarget.dataset.target:this.modalName=null,this.listTouchDirection=null}}};e.default=u}).call(this,a("0de9")["log"])},8553:function(t,e,a){"use strict";var n=a("ab2d"),s=a.n(n);s.a},ab2d:function(t,e,a){var n=a("af0b");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var s=a("4f06").default;s("b6f16088",n,!0,{sourceMap:!1,shadowMode:!1})},af0b:function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,".empty-content[data-v-401ee940]{display:flex;align-items:center;justify-content:center;width:100%;padding:%?200?% %?130?%}.empty-content uni-image[data-v-401ee940]{width:%?320?%;height:%?320?%}",""]),t.exports=e},cdb2:function(t,e,a){"use strict";a.r(e);var n=a("db13"),s=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(i);e["default"]=s.a},db13:function(t,e,a){"use strict";a("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={name:"WanlEmpty",props:{src:{type:String,default:""},text:{type:String,default:"没有找到任何内容"}}};e.default=n},de04:function(t,e,a){"use strict";a.d(e,"b",(function(){return s})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return n}));var n={wanlEmpty:a("fdbb").default},s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("v-uni-view",{staticClass:"cu-custom",staticStyle:{color:"#fff"}},[a("v-uni-view",{staticClass:"cu-bar flex-space",staticStyle:{height:"49px","padding-top":"0px"}},[a("v-uni-view",{staticStyle:{"text-align":"center",width:"120px"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.go("/pages/kefu_index")}}},[t._v(t._s(t.myname))]),a("v-uni-view",{staticClass:"bar-bg ",staticStyle:{height:"49px",opacity:"1",backgroundColor:"#111",color:"#fff","text-align":"center","line-height":"49px","font-size":"20px","font-weight":"bold"}},[t._v("会话")]),a("v-uni-view",{staticStyle:{"text-align":"center",width:"70px"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.go("/pages/kefu_copy")}}},[t._v("复制")])],1)],1),a("v-uni-view",{staticClass:"edgeInsetTop"}),t.addressList&&0==t.addressList.length&&"loading"!==t.status?a("wanl-empty",{attrs:{text:"没有任何人联系你"}}):t._e(),a("v-uni-view",{staticClass:"margin-top-bj",staticStyle:{"margin-top":"49px"}},[a("v-uni-view",{staticClass:"cu-list menu-avatar"},t._l(t.addressList,(function(e,n){return t.addressList?a("v-uni-view",{key:e.id,staticClass:"cu-item",class:t.modalName=="move-box-"+n?"move-cur":"",attrs:{"data-target":"move-box-"+n},on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.ListTouchStart.apply(void 0,arguments)},touchmove:function(e){arguments[0]=e=t.$handleEvent(e),t.ListTouchMove.apply(void 0,arguments)},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.ListTouchEnd.apply(void 0,arguments)},click:function(a){arguments[0]=a=t.$handleEvent(a),t.checkAddress(e)}}},[a("v-uni-view",{staticClass:"cu-avatar round lg",staticStyle:{"background-color":"#111"}},[t._v(t._s(e.name.substring(0,1)))]),a("v-uni-view",{staticClass:"content"},[a("v-uni-view",[a("v-uni-text",{staticClass:"wanl-pip margin-right-sm text-lg"},[t._v(t._s(e.name))]),a("v-uni-text",{staticClass:"wanl-gray-light text-sm"},[t._v(t._s(e.content))])],1)],1),a("v-uni-view",{staticClass:"action",on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.addAddress("edit",e)}}},[e.count>0?a("v-uni-text",{staticClass:"flex-center text-xl radius-50",staticStyle:{color:"#fff",background:"#fe6600",width:"18px",height:"18px",display:"flex","font-size":"9px"}},[t._v(t._s(e.count))]):t._e()],1)],1):a("wanl-empty",{attrs:{text:"没有找到任何地址",src:"address_default3x"}})})),1)],1),a("v-uni-view",{staticClass:"edgeInsetBottom"})],1)},i=[]},fdbb:function(t,e,a){"use strict";a.r(e);var n=a("740b"),s=a("cdb2");for(var i in s)["default"].indexOf(i)<0&&function(t){a.d(e,t,(function(){return s[t]}))}(i);a("8553");var u=a("f0c5"),r=Object(u["a"])(s["default"],n["b"],n["c"],!1,null,"401ee940",null,!1,n["a"],void 0);e["default"]=r.exports}}]);